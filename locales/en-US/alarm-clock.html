<script type="text/x-red" data-help-name="ui_alarm_clock">
    <p>A ui alarm clock for the Node-RED Dashboard</p>

    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">JSON string</span> </dt>
        <dd> any existing alarms and settings (generated by the nodes top output) </dd>
        <dt>disableAlarm <span class="property-type">number | string</span> </dt>
        <dd> the alarm name or index to disable </dd>
        <dt>enableAlarm <span class="property-type">number | string</span> </dt>
        <dd> the alarm name or index to enable </dd>
        <dt>getStatus <span class="property-type">any</span> </dt>
        <dd> triggers the node to send its data to the top output. Can be used to persist the schedule to to get the upcoming alarms information</dd>
    </dl>

    <h3>Outputs</h3>
    <ol class="node-ports">
        <li> Outputs new alarms and settings
            <dl class="message-properties">
                <dt>payload <span class="property-type">JSON string</span></dt>
                <dd>The current schedule, settings and upcoming alerts (stringified). Useful for persisting schedule to disk</dd>
            </dl>
            <dl class="message-properties">
                <dt>data <span class="property-type">JSON</span></dt>
                <dd>The current schedule, settings and upcoming alerts</dd>
                <dd>Upcoming alerts is a dictionary between alarm names and the epoch of the next alarm trigger time</dd>
            </dl>
        </li>
        <li> to N - Outputs alarm event
            <dl class="message-properties">
                <dt>payload <span class="property-type">booelan/span></dt>
                <dd>true if alarm is currently triggered, false otherwise</dd>
            </dl>
            <dl class="message-properties">
                <dt>topic <span class="property-type">string</span></dt>
                <dd>the alarm name</dd>
            </dl>
        </li>
    </ol>

    <h3>Details</h3>
    <p> If you changed the node-red <a href="https://nodered.org/docs/user-guide/context#context-stores">contextStorage to localfilesystem</a>,
        schedules are automatically saved and restored after a reboot.
        Otherwise incoming <code>msg.payload</code> is used as the schedule data.
        You can use that to inject a predefined schedule after a certain event or
        just after a reboot. If there is no incoming payload or the incoming
        payload is not a valid schedule a new and empty schedule will be created.
    </p>
    <p> To create a new schedule click the nodes plus sign at the right top
        corner (at the frontend/dashboard)
    </p>
    <p> The section <code>Alarms</code> must contain at least 1 alarm and offers
        the possibility to add many more. Every alarm has a node output and an
        independent schedule at the ui dashboard.
    </p>
    <p> The <code>Refresh</code> property adjusts the frequency of how often
        alarms are evaluated (in seconds - default 60).
    </p>
    <h3>References</h3>
    <ul>
        <li><a href="https://github.com/regevbr/node-red-contrib-ui-alarm-clock">GitHub</a> - the nodes github repository</li>
    </ul>
</script>
